(this["webpackJsonpsocial-network-v2"]=this["webpackJsonpsocial-network-v2"]||[]).push([[0],{55:function(e,t,n){e.exports=n(82)},60:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=(n(60),n(23)),u=n(27),i=n(39),s=n(45),m=n(8),f=n(40),g=n.n(f).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-key":"c3ff16a4-4b9d-490a-b188-2440deac59e8"}}),E=function(e){return g.post("follow/".concat(e))},d=function(e){return g.delete("follow/".concat(e))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return g.get("users?page=".concat(e,"&count=").concat(t))},O={items:[],totalCount:0,pageSize:100,currentPage:1,followingProgress:[],error:null},b=function(e,t){return{type:"USERS/TOGGLE_FOLLOWING",isFollowing:e,userID:t}},S=Object(u.b)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{items:t.users,totalCount:t.totalCount,error:t.error});case"USERS/CHANGE_CURRENT_PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.currentPage});case"USERS/FOLLOW":case"USERS/UNFOLLOW":return Object(m.a)(Object(m.a)({},e),{},{items:e.items.map((function(e){return e.id===t.userID?Object(m.a)(Object(m.a)({},e),{},{followed:!e.followed}):e}))});case"USERS/TOGGLE_FOLLOWING":return Object(m.a)(Object(m.a)({},e),{},{followingProgress:t.isFollowing?[].concat(Object(s.a)(e.followingProgress),[t.userID]):e.followingProgress.filter((function(e){return e!==t.userID}))});default:return e}}}),p=Object(u.c)(S,Object(u.a)(i.a));window.store=p;var h=n(101),j=n(106),v=n(102),C=n(105),U=n(103),P=n(107),R=r.a.memo((function(e){var t=e.users,n=e.pages,a=e.changePageNumber,o=e.changeFollowingStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{maxWidth:"sm"},r.a.createElement(j.a,{count:n,color:"primary",onChange:function(e,t){return a(t)}}),t.items.map((function(e){var n=e.followed?r.a.createElement(v.a,{variant:"outlined",color:"primary",size:"small","data-following":"unfollow",disabled:t.followingProgress.some((function(t){return t===e.id})),onClick:function(t){return o(t.currentTarget.dataset.following,e.id)}},"Unfollow"):r.a.createElement(v.a,{variant:"outlined",color:"primary",size:"small","data-following":"follow",disabled:t.followingProgress.some((function(t){return t===e.id})),onClick:function(t){return o(t.currentTarget.dataset.following,e.id)}},"Follow");return r.a.createElement(C.a,{component:"div",key:e.id},r.a.createElement(U.a,{container:!0,spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement(P.a,{src:e.photos.small})),r.a.createElement(U.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(U.a,{item:!0,xs:!0,direction:"column",spacing:3},r.a.createElement(U.a,{item:!0,xs:!0},e.name),r.a.createElement(U.a,{item:!0,xs:!0},e.status),r.a.createElement(U.a,{item:!0,xs:!0},n)))))}))))})),F=r.a.memo((function(){var e=Object(l.c)((function(e){return e.users})),t=Object(l.b)();Object(a.useEffect)((function(){var n,a;t((n=e.currentPage,a=e.pageSize,function(e){w(n,a).then((function(t){var n,a,r;e((n=t.data.items,a=t.data.totalCount,r=t.data.error,{type:"USERS/SET_USERS",users:n,totalCount:a,error:r}))}))}))}),[e.currentPage]);var n=Math.ceil(e.totalCount/e.pageSize),o=Object(a.useCallback)((function(e){t({type:"USERS/CHANGE_CURRENT_PAGE",currentPage:e})}),[t]),c=Object(a.useCallback)((function(e,n){"unfollow"===e?t(function(e){return function(t){t(b(!0,e)),d(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:"USERS/UNFOLLOW",userID:e}}(e)),t(b(!1,e))}))}}(n)):"follow"===e&&t(function(e){return function(t){t(b(!0,e)),E(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:"USERS/FOLLOW",userID:e}}(e)),t(b(!1,e))}))}}(n))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{users:e,pages:n,changePageNumber:o,changeFollowingStatus:c}))})),L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null))},y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null))};c.a.render(r.a.createElement(l.a,{store:p},r.a.createElement(y,null)),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.71e41fcf.chunk.js.map